<div class="profile-container">
    <div class="container container-content">
        <!-- Loading State -->
        <div *ngIf="loading" class="loading-container">
            <div class="spinner"></div>
            <p>Loading profile...</p>
        </div>

        <!-- Profile Content -->
        <div *ngIf="!loading && user" class="profile-content">
            <!-- Profile Header -->
            <header class="profile-header">
                <div class="profile-avatar-large">
                    {{ getUserInitials() }}
                </div>

                <div class="profile-info">
                    <h1 class="profile-name">{{ user.name }}</h1>
                    <p class="profile-email">{{ user.email }}</p>

                    <div class="profile-stats">
                        <div class="stat">
                            <span class="stat-value">{{ user.followersCount }}</span>
                            <span class="stat-label">Followers</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">{{ user.followingCount }}</span>
                            <span class="stat-label">Following</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">{{ posts.length }}</span>
                            <span class="stat-label">Posts</span>
                        </div>
                    </div>

                    <div class="profile-actions" *ngIf="!isOwnProfile">
                        <button class="btn" [class.btn-primary]="!user.isFollowedByCurrentUser"
                            [class.btn-secondary]="user.isFollowedByCurrentUser" (click)="toggleSubscription()">
                            {{ user.isFollowedByCurrentUser ? 'Unfollow' : 'Follow' }}
                        </button>
                        <button class="btn btn-secondary" (click)="openReportModal()">
                            Report User
                        </button>
                    </div>
                </div>
            </header>

            <div class="divider"></div>

            <!-- User Posts -->
            <section class="user-posts">
                <h2 class="section-title">Posts</h2>

                <div *ngIf="posts.length === 0" class="empty-state">
                    <p>No posts yet</p>
                </div>

                <div *ngIf="posts.length > 0" class="posts-grid">
                    <app-post-card *ngFor="let post of posts" [post]="post" (like)="onLike($event)"
                        (delete)="onDelete($event)">
                    </app-post-card>
                </div>
            </section>
        </div>
    </div>
</div>

<!-- Report Modal -->
<app-report-modal *ngIf="showReportModal && user" [userId]="user.id" [userName]="user.name" (close)="closeReportModal()"
    (reported)="onReported()">
</app-report-modal>